<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8" />
  <title>Verlofkalender Simulator</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    /* =====================
       KLEUREN & THEMA'S
       ===================== */

    /* Default = dark theme (WCAG-vriendelijk) */
    :root {
      --bg: #121212;
      --bg-alt: #1f1f26;
      --border: #3a3a46;
      --text: #f5f5f5;
      --muted: #b0b0c2;
      --accent: #ffb74d;
      --accent-soft: #4d342f;
      --error: #ef5350;
      --weekend: #263238;
      --holiday: #512525;
      --regional: #4e3d18;
      --grid-border: #42424f;
      --cell-size: 1.9rem;
      --radius: 0.5rem;
      --input-radius: 0.35rem;
      --shadow-soft: 0 2px 10px rgba(0,0,0,0.6);
    }

    body.light-theme {
      --bg: #f5f5f7;
      --bg-alt: #ffffff;
      --border: #d0d0d5;
      --text: #222222;
      --muted: #666666;
      --accent: #ef6c00;
      --accent-soft: #ffe0b2;
      --error: #d32f2f;
      --weekend: #e3f2fd;
      --holiday: #ffcdd2;
      --regional: #ffe082;
      --grid-border: #cccccc;
      --shadow-soft: 0 2px 6px rgba(0,0,0,0.08);
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: var(--bg);
      color: var(--text);
    }

    a {
      color: inherit;
    }

    .app {
      max-width: 1200px;
      margin: 1.5rem auto 2.5rem;
      padding: 0 1rem;
    }

    h1 {
      font-size: 1.6rem;
      margin: 0 0 0.5rem;
    }

    .subtitle {
      color: var(--muted);
      margin-bottom: 1.5rem;
      font-size: 0.95rem;
    }

    /* =====================
       TOP BAR
       ===================== */

    .top-bar {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      align-items: center;
      margin-bottom: 1rem;
    }

    .top-bar-group {
      display: flex;
      flex-direction: column;
      gap: 0.25rem;
    }

    .top-bar-spacer {
      flex: 1;
    }

    label {
      font-size: 0.85rem;
      color: var(--muted);
    }

    select, input[type="number"] {
      padding: 0.35rem 0.5rem;
      border-radius: var(--input-radius);
      border: 1px solid var(--border);
      background: var(--bg-alt);
      font-size: 0.9rem;
      min-width: 120px;
      color: var(--text);
    }

    select:disabled, input:disabled {
      background: #555555;
      color: #dddddd;
    }

    body.light-theme select:disabled,
    body.light-theme input:disabled {
      background: #eeeeee;
      color: #888888;
    }

    .theme-toggle-btn {
      border-radius: 999px;
      border: 1px solid var(--border);
      background: var(--bg-alt);
      color: var(--text);
      padding: 0.35rem 0.85rem;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-size: 0.95rem;
      cursor: pointer;
      box-shadow: var(--shadow-soft);
    }

    .theme-toggle-btn span {
      margin-left: 0.35rem;
      font-size: 0.8rem;
      color: var(--muted);
    }

    /* =====================
       CARDS & BUTTONS
       ===================== */

    .card {
      background: var(--bg-alt);
      border-radius: var(--radius);
      box-shadow: var(--shadow-soft);
      padding: 1rem;
      margin-bottom: 1rem;
      border: 1px solid var(--border);
    }

    .inputs-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(190px, 1fr));
      gap: 0.75rem 1rem;
      align-items: flex-end;
    }

    .input-item {
      display: flex;
      flex-direction: column;
      gap: 0.25rem;
    }

    .input-row {
      display: flex;
      gap: 0.35rem;
      align-items: center;
    }

    .input-row input {
      flex: 1;
    }

    .days-hint {
      font-size: 0.8rem;
      color: var(--muted);
      white-space: nowrap;
    }

    .totals-row {
      margin-top: 0.5rem;
      padding-top: 0.5rem;
      border-top: 1px dashed var(--border);
      font-size: 0.9rem;
      display: flex;
      flex-wrap: wrap;
      gap: 0.75rem;
      justify-content: space-between;
      align-items: center;
    }

    .totals-row span {
      white-space: nowrap;
    }

    .btn, button {
      font-size: 0.85rem;
      border-radius: 999px;
      border: 1px solid transparent;
      padding: 0.35rem 0.9rem;
      cursor: pointer;
      background: var(--accent);
      color: #000000;
      display: inline-flex;
      align-items: center;
      gap: 0.35rem;
    }

    .btn-secondary {
      background: transparent;
      color: var(--text);
      border-color: var(--border);
    }

    .btn-danger {
      background: var(--error);
      color: #ffffff;
    }

    .btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }

    .icon-pencil::before {
      content: "‚úèÔ∏è";
    }

    .icon-info::before {
      content: "‚ÑπÔ∏è";
    }

    .icon-download::before {
      content: "‚¨áÔ∏è";
    }

    .icon-reset::before {
      content: "üóëÔ∏è";
    }

    /* =====================
       KALENDER
       ===================== */

    .calendar-wrapper {
      overflow-x: visible;
    }

    .calendar-table {
      border-collapse: collapse;
      width: 100%;
      font-size: 0.75rem;
    }

    .calendar-table th,
    .calendar-table td {
      border: 1px solid var(--grid-border);
      text-align: center;
      padding: 0;
      min-width: var(--cell-size);
      height: var(--cell-size);
    }

    .calendar-table th {
      background: #2b2b35;
      font-weight: 600;
      position: sticky;
      top: 0;
      z-index: 2;
      color: var(--text);
    }

    body.light-theme .calendar-table th {
      background: #eeeeee;
      color: #000000;
    }

    .month-cell {
      background: #2b2b35;
      font-weight: 600;
      position: sticky;
      left: 0;
      z-index: 1;
      min-width: 70px;
      color: var(--text);
    }

    body.light-theme .month-cell {
      background: #fafafa;
      color: #000000;
    }

    .calendar-day {
      cursor: pointer;
      position: relative;
      background: var(--bg-alt);
      transition: background 0.12s ease, box-shadow 0.12s ease;
      color: var(--text);
    }

    .calendar-day.weekend {
      background: var(--weekend);
      cursor: default;
      color: var(--text);
    }

    .calendar-day.holiday-federal {
      background: var(--holiday);
      cursor: default;
    }

    .calendar-day.holiday-regional {
      background: var(--regional);
    }

    .calendar-day.empty {
      background: #303038;
      cursor: default;
    }

    body.light-theme .calendar-day.empty {
      background: #f0f0f0;
    }

    .calendar-day.selected-full {
      background: var(--accent);
      color: #000000;
      box-shadow: inset 0 0 0 2px rgba(0,0,0,0.25);
    }

    .calendar-day.selected-half {
      background: var(--accent-soft);
      color: #ffffff;
      box-shadow: inset 0 0 0 2px var(--accent);
    }

    body.light-theme .calendar-day.selected-half {
      color: #000000;
    }

    .calendar-day.selected-half::after {
      content: "¬Ω";
      position: absolute;
      bottom: 1px;
      right: 3px;
      font-size: 0.7em;
      opacity: 0.9;
    }

    .calendar-day.click-disabled {
      cursor: default;
    }

    /* =====================
       LEGENDE & SIDE PANEL
       ===================== */

    .legend {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem 1rem;
      font-size: 0.8rem;
      margin-top: 0.75rem;
    }

    .legend-item {
      display: inline-flex;
      align-items: center;
      gap: 0.35rem;
    }

    .legend-color {
      width: 14px;
      height: 14px;
      border-radius: 3px;
      border: 1px solid var(--grid-border);
    }

    .legend-workday {
      background: var(--bg-alt);
    }

    .legend-weekend {
      background: var(--weekend);
    }

    .legend-holiday {
      background: var(--holiday);
    }

    .legend-regional {
      background: var(--regional);
    }

    .legend-selected-full {
      background: var(--accent);
    }

    .legend-selected-half {
      background: var(--accent-soft);
    }

    .side-panel {
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
      font-size: 0.86rem;
      margin-top: 1rem;
    }

    .side-section-title {
      font-weight: 600;
      margin-bottom: 0.25rem;
    }

    .side-field {
      display: flex;
      justify-content: space-between;
      gap: 0.75rem;
    }

    .side-field span {
      font-size: 0.85rem;
    }

    .side-label {
      color: var(--muted);
    }

    .side-value {
      font-weight: 500;
    }

    .side-day-box {
      padding: 0.5rem 0.6rem;
      border-radius: var(--radius);
      border: 1px solid var(--border);
      background: #191922;
    }

    body.light-theme .side-day-box {
      background: #fafafa;
    }

    .error-text {
      color: var(--error);
      font-size: 0.82rem;
      margin-top: 0.25rem;
    }

    .footer-line {
      margin-top: 0.75rem;
      font-size: 0.75rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      color: var(--muted);
    }

    .footer-right {
      font-weight: 500;
    }

    .about-toggle {
      margin-top: 0.75rem;
    }

    .about-content {
      margin-top: 0.5rem;
      font-size: 0.85rem;
      color: var(--muted);
      line-height: 1.4;
      border-radius: var(--radius);
      border: 1px dashed var(--border);
      padding: 0.75rem;
      display: none;
    }

    .about-content.visible {
      display: block;
    }

    /* =====================
       TOAST
       ===================== */

    .toast {
      position: fixed;
      bottom: 1rem;
      left: 50%;
      transform: translateX(-50%);
      background: #000000;
      color: #ffffff;
      padding: 0.6rem 1rem;
      border-radius: 999px;
      font-size: 0.8rem;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.15s ease;
      z-index: 20;
    }

    .toast.visible {
      opacity: 0.95;
      pointer-events: auto;
    }

    @media (max-width: 700px) {
      .calendar-table {
        font-size: 0.7rem;
      }
    }
  </style>
</head>
<body>
<div class="app">
  <h1>Simulator verlofkalender</h1>
  <div class="subtitle">
    Kies je paritair comit√© en jaar, vul je tellers in en plan je verlofdagen in volgens de Belgische regels.
  </div>

  <div class="top-bar">
    <div class="top-bar-group">
      <label for="pc-select">Paritair comit√©</label>
      <select id="pc-select">
        <option value="PC200">Holding (PC 200)</option>
        <option value="PC306">Verzekeren (PC 306)</option>
      </select>
    </div>
    <div class="top-bar-group">
      <label for="year-select">Jaar</label>
      <select id="year-select"></select>
    </div>
    <div class="top-bar-spacer"></div>
    <button id="theme-toggle" class="theme-toggle-btn" aria-label="Schakel naar lichte modus">
      ‚òÄÔ∏è<span>Dark mode</span>
    </button>
  </div>

  <div class="card">
    <div class="inputs-grid" id="inputs-grid">
      <div class="input-item">
        <label for="statutory-hours">Wettelijk verlof (uren)</label>
        <div class="input-row">
          <input type="number" id="statutory-hours" min="0" step="0.01" />
          <span class="days-hint" id="statutory-days-label">0,0 dagen</span>
        </div>
      </div>
      <div class="input-item">
        <label for="replacement-hours">Vervangende feestdagen (uren)</label>
        <div class="input-row">
          <input type="number" id="replacement-hours" min="0" step="0.01" />
          <span class="days-hint" id="replacement-days-label">0,0 dagen</span>
        </div>
      </div>
      <div class="input-item">
        <label for="regional-hours">Vlaamse Gemeenschap (uren)</label>
        <div class="input-row">
          <input type="number" id="regional-hours" min="0" step="0.01" />
          <span class="days-hint" id="regional-days-label">0,0 dagen</span>
        </div>
      </div>

      <div class="input-item">
        <label for="adv1-hours">ADV1 (Q1) uren</label>
        <div class="input-row">
          <input type="number" id="adv1-hours" min="0" step="0.01" />
          <span class="days-hint" id="adv1-days-label">0,0 dagen</span>
        </div>
      </div>
      <div class="input-item">
        <label for="adv2-hours">ADV2 (Q2) uren</label>
        <div class="input-row">
          <input type="number" id="adv2-hours" min="0" step="0.01" />
          <span class="days-hint" id="adv2-days-label">0,0 dagen</span>
        </div>
      </div>
      <div class="input-item">
        <label for="adv3-hours">ADV3 (Q3) uren</label>
        <div class="input-row">
          <input type="number" id="adv3-hours" min="0" step="0.01" />
          <span class="days-hint" id="adv3-days-label">0,0 dagen</span>
        </div>
      </div>
      <div class="input-item">
        <label for="adv4-hours">ADV4 (Q4) uren</label>
        <div class="input-row">
          <input type="number" id="adv4-hours" min="0" step="0.01" />
          <span class="days-hint" id="adv4-days-label">0,0 dagen</span>
        </div>
      </div>
    </div>

    <div class="totals-row">
      <div>
        <span id="total-hours-label">Totaal: 0,00 uur</span> ¬∑
        <span id="total-days-label">0,0 dagen</span>
      </div>
      <div style="display:flex; gap:0.5rem;">
        <button id="confirm-inputs-btn" class="btn">
          Input bevestigen
        </button>
        <button id="edit-inputs-btn" class="btn btn-secondary icon-pencil" style="display:none;">
          Bewerk tellers
        </button>
      </div>
    </div>
  </div>

  <div class="card">
    <div class="calendar-wrapper">
      <table class="calendar-table" id="calendar-table" aria-label="Verlofkalender"></table>
      <div class="legend">
        <div class="legend-item">
          <span class="legend-color legend-workday"></span>
          <span>Werkdag (klikbaar)</span>
        </div>
        <div class="legend-item">
          <span class="legend-color legend-weekend"></span>
          <span>Weekend / niet klikbaar</span>
        </div>
        <div class="legend-item">
          <span class="legend-color legend-holiday"></span>
          <span>Wettelijke feestdag</span>
        </div>
        <div class="legend-item">
          <span class="legend-color legend-regional"></span>
          <span>Regionale dag (11 juli)</span>
        </div>
        <div class="legend-item">
          <span class="legend-color legend-selected-full"></span>
          <span>Verlofdag (volledig)</span>
        </div>
        <div class="legend-item">
          <span class="legend-color legend-selected-half"></span>
          <span>Verlofdag (¬Ω dag)</span>
        </div>
      </div>
    </div>

    <div class="side-panel">
      <div>
        <div class="side-section-title">Geselecteerde dag</div>
        <div id="day-details" class="side-day-box">
          <div class="side-field">
            <span class="side-label">Datum</span>
            <span class="side-value" id="detail-date">‚Äì</span>
          </div>
          <div class="side-field">
            <span class="side-label">Weekdag</span>
            <span class="side-value" id="detail-weekday">‚Äì</span>
          </div>
          <div class="side-field">
            <span classside-label">Feestdag</span>
            <span class="side-value" id="detail-holiday">‚Äì</span>
          </div>
          <div class="side-field">
            <span class="side-label">Type verlof</span>
            <span class="side-value" id="detail-leave-type">‚Äì</span>
          </div>
          <div class="side-field">
            <span class="side-label">Uren</span>
            <span class="side-value" id="detail-leave-hours">‚Äì</span>
          </div>
          <div class="side-field">
            <span class="side-label">¬Ω dag?</span>
            <span class="side-value" id="detail-half">‚Äì</span>
          </div>
          <div style="margin-top:0.4rem;">
            <button id="remove-day-btn" class="btn btn-secondary" disabled>
              Verwijder verlof van deze dag
            </button>
          </div>
        </div>
      </div>

      <div>
        <div class="side-section-title">Resterende saldo's</div>
        <div class="side-day-box">
          <div class="side-field">
            <span class="side-label">Wettelijk verlof</span>
            <span class="side-value" id="remaining-statutory">0,00 u (0,0 d)</span>
          </div>
          <div class="side-field">
            <span class="side-label">Vervangende feestdagen</span>
            <span class="side-value" id="remaining-replacement">0,00 u (0,0 d)</span>
          </div>
          <div class="side-field">
            <span class="side-label">Vlaamse Gemeenschap</span>
            <span class="side-value" id="remaining-regional">0,00 u (0,0 d)</span>
          </div>
          <div class="side-field">
            <span class="side-label">ADV Q1</span>
            <span class="side-value" id="remaining-adv1">0,00 u (0,0 d)</span>
          </div>
          <div class="side-field">
            <span class="side-label">ADV Q2</span>
            <span class="side-value" id="remaining-adv2">0,00 u (0,0 d)</span>
          </div>
          <div class="side-field">
            <span class="side-label">ADV Q3</span>
            <span class="side-value" id="remaining-adv3">0,00 u (0,0 d)</span>
          </div>
          <div class="side-field">
            <span class="side-label">ADV Q4</span>
            <span class="side-value" id="remaining-adv4">0,00 u (0,0 d)</span>
          </div>
          <div class="side-field" style="margin-top:0.35rem; border-top:1px dashed var(--border); padding-top:0.3rem;">
            <span class="side-label">Totaal resterend</span>
            <span class="side-value" id="remaining-total">0,00 u (0,0 d)</span>
          </div>
        </div>
      </div>

      <div>
        <div class="side-section-title">Acties</div>
        <div style="display:flex; flex-wrap:wrap; gap:0.5rem;">
          <button id="export-csv-btn" class="btn btn-secondary icon-download">
            Exporteer als CSV
          </button>
          <button id="reset-btn" class="btn btn-secondary icon-reset">
            Reset planner
          </button>
        </div>
        <div id="error-message" class="error-text"></div>
      </div>

      <div class="footer-line">
        <div>
          <button id="about-toggle-btn" class="btn btn-secondary icon-info about-toggle">
            Over deze tool
          </button>
        </div>
        <div class="footer-right">
          Gemaakt door PAlex
        </div>
      </div>

      <div id="about-content" class="about-content">
        Deze tool is een simulator voor een persoonlijke verlofkalender. Je kiest eerst het juiste paritair comit√©
        (Holding ‚Äì PC 200 of Verzekeren ‚Äì PC 306) en het jaar. Daarna vul je de verschillende tellers in: wettelijk
        verlof, vervangende feestdagen, Vlaamse Gemeenschap en ADV-uren per kwartaal (Q1 t.e.m. Q4). De tool zet
        deze uren om in dagen en toont je meteen het totale saldo.<br><br>
        Na het bevestigen van de tellers kun je verlofdagen in de kalender inplannen: een linkermuisklik zet een
        volledige dag (7,33 u) om in verlof, een rechtermuisklik plant een halve dag (3,46 u) in. ADV-dagen worden
        automatisch als eerste aangesproken en mogen pas gebruikt worden vanaf het kwartaal waarin ze vrijkomen.
        De tool controleert of er voldoende saldo is en geeft een duidelijke foutmelding wanneer je probeert meer
        verlof te plannen dan je beschikbaar hebt of ADV te gebruiken v√≥√≥r de vrijgaveperiode. Weekenddagen en
        wettelijke Belgische feestdagen zijn niet klikbaar. De regionale feestdag van de Vlaamse Gemeenschap
        (11 juli) wordt apart aangeduid voor PC 306.<br><br>
        Je ziet steeds een overzicht van de resterende uren en dagen per type verlof, samen met een totaalsaldo.
        Je kunt ingeplande verlof op een dag verwijderen door de dag opnieuw aan te klikken of via de knop
        ‚ÄúVerwijder verlof van deze dag‚Äù. Met de exportfunctie kun je je planning downloaden als CSV-bestand
        (handig om verder te verwerken of door te geven aan HR).<br><br>
        <strong>Security & privacy:</strong> alle gegevens blijven volledig in je browser. Er wordt niets doorgestuurd
        naar een server of externe dienst. De gegevens (tellers, gekozen comit√©, jaar en geplande dagen) worden enkel
        opgeslagen in <code>localStorage</code> op jouw toestel, zodat je planning bewaard blijft bij een volgende
        sessie. Via de reset-knop kun je alles in √©√©n klik wissen. Dit maakt de tool veilig en privacyvriendelijk in
        gebruik.
      </div>
    </div>
  </div>
</div>

<div id="toast" class="toast"></div>

<script>
  // --- Constants ---
  const HOURS_FULL_DAY = 7.33;
  const HOURS_HALF_DAY = 3.46;
  const STORAGE_PREFIX = "verlofSimulator_";
  const THEME_KEY = "verlofSimulator_theme";

  const PC_CODES = {
    PC200: "PC200",
    PC306: "PC306",
  };

  const LEAVE_TYPES = {
    ADV: "ADV",
    REGIONAL: "REGIONAL",
    REPLACEMENT: "REPLACEMENT",
    STATUTORY: "STATUTORY",
  };

  // --- State ---
  let state = {
    year: new Date().getFullYear(),
    pcCode: PC_CODES.PC200,
    inputsLocked: false,
    countersInitial: {
      statutory: 0,
      replacement: 0,
      regional: 0,
      adv: [0, 0, 0, 0],
    },
    daySelections: {},
    holidays: [],
  };

  // --- Utility helpers ---
  function formatHours(h) {
    return (Math.round(h * 100) / 100).toFixed(2).replace(".", ",");
  }

  function floorDays(hours) {
    const days = hours / HOURS_FULL_DAY;
    const floored = Math.floor(days * 10) / 10;
    return floored.toFixed(1).replace(".", ",");
  }

  function isoDate(date) {
    return date.toISOString().split("T")[0];
  }

  function isWeekend(date) {
    const d = date.getDay();
    return d === 0 || d === 6;
  }

  function getAdvBucketForDate(date) {
    const m = date.getMonth();
    if (m <= 2) return 0;
    if (m <= 5) return 1;
    if (m <= 8) return 2;
    return 3;
  }

  function getAdvBucketAvailableFrom(bucketIndex, year) {
    if (bucketIndex === 0) return new Date(year, 0, 1);
    if (bucketIndex === 1) return new Date(year, 3, 1);
    if (bucketIndex === 2) return new Date(year, 6, 1);
    return new Date(year, 9, 1);
  }

  function weekdayName(date) {
    const days = ["Zondag", "Maandag", "Dinsdag", "Woensdag", "Donderdag", "Vrijdag", "Zaterdag"];
    return days[date.getDay()];
  }

  function monthNames() {
    return [
      "januari","februari","maart","april","mei","juni",
      "juli","augustus","september","oktober","november","december"
    ];
  }

  function showToast(message) {
    const toast = document.getElementById("toast");
    toast.textContent = message;
    toast.classList.add("visible");
    setTimeout(() => toast.classList.remove("visible"), 2200);
  }

  // --- Easter & holidays ---
  function getEasterDate(year) {
    const a = year % 19;
    const b = Math.floor(year / 100);
    const c = year % 100;
    const d = Math.floor(b / 4);
    const e = b % 4;
    const f = Math.floor((b + 8) / 25);
    const g = Math.floor((b - f + 1) / 3);
    const h = (19 * a + b - d - g + 15) % 30;
    const i = Math.floor(c / 4);
    const k = c % 4;
    const l = (32 + 2 * e + 2 * i - h - k) % 7;
    const m = Math.floor((a + 11 * h + 22 * l) / 451);
    const month = Math.floor((h + l - 7 * m + 114) / 31);
    const day = ((h + l - 7 * m + 114) % 31) + 1;
    return new Date(year, month - 1, day);
  }

  function addDays(date, days) {
    const d = new Date(date.getTime());
    d.setDate(d.getDate() + days);
    return d;
  }

  function buildHolidays(year, pcCode) {
    const holidays = [];

    function addHoliday(date, name, type) {
      holidays.push({
        date: isoDate(date),
        name,
        type,
      });
    }

    addHoliday(new Date(year, 0, 1), "Nieuwjaar", "FEDERAL");
    addHoliday(new Date(year, 4, 1), "Dag van de Arbeid", "FEDERAL");
    addHoliday(new Date(year, 6, 21), "Nationale feestdag", "FEDERAL");
    addHoliday(new Date(year, 7, 15), "Onze-Lieve-Vrouw Hemelvaart", "FEDERAL");
    addHoliday(new Date(year, 10, 1), "Allerheiligen", "FEDERAL");
    addHoliday(new Date(year, 10, 11), "Wapenstilstand", "FEDERAL");
    addHoliday(new Date(year, 11, 25), "Kerstmis", "FEDERAL");

    const easter = getEasterDate(year);
    addHoliday(addDays(easter, 1), "Paasmaandag", "FEDERAL");
    addHoliday(addDays(easter, 39), "Onze-Lieve-Heer Hemelvaart", "FEDERAL");
    addHoliday(addDays(easter, 50), "Pinkstermaandag", "FEDERAL");

    if (pcCode === PC_CODES.PC306) {
      addHoliday(new Date(year, 6, 11), "Feestdag Vlaamse Gemeenschap", "REGIONAL");
    }

    return holidays;
  }

  function getHolidayMap() {
    const map = {};
    state.holidays.forEach(h => {
      map[h.date] = h;
    });
    return map;
  }

  // --- PC Rules ---
  function getPcRules(pcCode) {
    if (pcCode === PC_CODES.PC306) {
      return {
        code: PC_CODES.PC306,
        getDefaultCounters(year) {
          return {
            statutory: 0,
            replacement: 0,
            regional: HOURS_FULL_DAY, // 1 dag
            adv: [0, 0, 0, 0],
          };
        },
        getLeavePriority() {
          return [LEAVE_TYPES.ADV, LEAVE_TYPES.REGIONAL, LEAVE_TYPES.REPLACEMENT, LEAVE_TYPES.STATUTORY];
        },
      };
    }
    return {
      code: PC_CODES.PC200,
      getDefaultCounters(year) {
        return {
          statutory: 0,
          replacement: 0,
          regional: 0,
          adv: [0, 0, 0, 0],
        };
      },
      getLeavePriority() {
        return [LEAVE_TYPES.ADV, LEAVE_TYPES.REGIONAL, LEAVE_TYPES.REPLACEMENT, LEAVE_TYPES.STATUTORY];
      },
    };
  }

  // --- Local storage ---
  function storageKey(year, pcCode) {
    return `${STORAGE_PREFIX}${year}_${pcCode}`;
  }

  function saveState() {
    try {
      const key = storageKey(state.year, state.pcCode);
      const minimal = {
        year: state.year,
        pcCode: state.pcCode,
        inputsLocked: state.inputsLocked,
        countersInitial: state.countersInitial,
        daySelections: state.daySelections,
      };
      localStorage.setItem(key, JSON.stringify(minimal));
    } catch (e) {
      console.warn("Kon state niet opslaan:", e);
    }
  }

  function loadStateFor(year, pcCode) {
    const key = storageKey(year, pcCode);
    const raw = localStorage.getItem(key);
    const pcRules = getPcRules(pcCode);
    const defaults = pcRules.getDefaultCounters(year);

    state.year = year;
    state.pcCode = pcCode;
    state.holidays = buildHolidays(year, pcCode);

    if (raw) {
      try {
        const parsed = JSON.parse(raw);
        state.inputsLocked = !!parsed.inputsLocked;
        state.countersInitial = parsed.countersInitial || defaults;
        state.daySelections = parsed.daySelections || {};
      } catch (e) {
        console.warn("Kon state niet parsen, gebruik defaults:", e);
        state.inputsLocked = false;
        state.countersInitial = defaults;
        state.daySelections = {};
      }
    } else {
      state.inputsLocked = false;
      state.countersInitial = defaults;
      state.daySelections = {};
    }
  }

  function resetStateConfirmation() {
    const yes = window.confirm("Weet je zeker dat je alle ingevoerde gegevens en geplande verlofdagen wilt wissen?");
    if (!yes) return;
    const pcRules = getPcRules(state.pcCode);
    const defaults = pcRules.getDefaultCounters(state.year);
    state.inputsLocked = false;
    state.countersInitial = defaults;
    state.daySelections = {};
    const key = storageKey(state.year, state.pcCode);
    localStorage.removeItem(key);
    showToast("Planner gereset");
    updateUIFromState();
  }

  // --- Remaining counters ---
  function computeUsedHours() {
    const used = {
      statutory: 0,
      replacement: 0,
      regional: 0,
      adv: [0, 0, 0, 0],
    };

    Object.values(state.daySelections).forEach(sel => {
      switch (sel.type) {
        case LEAVE_TYPES.STATUTORY:
          used.statutory += sel.hours;
          break;
        case LEAVE_TYPES.REPLACEMENT:
          used.replacement += sel.hours;
          break;
        case LEAVE_TYPES.REGIONAL:
          used.regional += sel.hours;
          break;
        case LEAVE_TYPES.ADV:
          if (typeof sel.advBucket === "number") {
            used.adv[sel.advBucket] += sel.hours;
          }
          break;
      }
    });

    return used;
  }

  function computeRemaining() {
    const used = computeUsedHours();
    return {
      statutory: state.countersInitial.statutory - used.statutory,
      replacement: state.countersInitial.replacement - used.replacement,
      regional: state.countersInitial.regional - used.regional,
      adv: [
        state.countersInitial.adv[0] - used.adv[0],
        state.countersInitial.adv[1] - used.adv[1],
        state.countersInitial.adv[2] - used.adv[2],
        state.countersInitial.adv[3] - used.adv[3],
      ],
    };
  }

  // --- Calendar rendering ---
  function buildCalendarTable() {
    const table = document.getElementById("calendar-table");
    table.innerHTML = "";

    const months = monthNames();
    const daysHeader = document.createElement("tr");

    const corner = document.createElement("th");
    corner.textContent = "";
    corner.className = "month-cell";
    daysHeader.appendChild(corner);

    for (let d = 1; d <= 31; d++) {
      const th = document.createElement("th");
      th.textContent = d.toString();
      daysHeader.appendChild(th);
    }

    table.appendChild(daysHeader);

    const holidayMap = getHolidayMap();

    for (let m = 0; m < 12; m++) {
      const row = document.createElement("tr");
      const monthCell = document.createElement("td");
      monthCell.textContent = months[m];
      monthCell.className = "month-cell";
      row.appendChild(monthCell);

      for (let d = 1; d <= 31; d++) {
        const cell = document.createElement("td");
        const dateObj = new Date(state.year, m, d);

        if (dateObj.getMonth() !== m) {
          cell.className = "calendar-day empty";
          cell.textContent = "";
          row.appendChild(cell);
          continue;
        }

        const dateIsoStr = isoDate(dateObj);
        cell.className = "calendar-day";
        cell.textContent = d.toString();
        cell.dataset.date = dateIsoStr;

        const isWE = isWeekend(dateObj);
        const holiday = holidayMap[dateIsoStr] || null;
        if (isWE) {
          cell.classList.add("weekend", "click-disabled");
        }
        if (holiday) {
          if (holiday.type === "FEDERAL") {
            cell.classList.add("holiday-federal", "click-disabled");
          } else if (holiday.type === "REGIONAL") {
            cell.classList.add("holiday-regional");
          }
          cell.title = holiday.name;
        }

        const clickable = !cell.classList.contains("click-disabled");
        if (clickable) {
          cell.addEventListener("click", (ev) => onDayClick(ev, dateObj, false));
          cell.addEventListener("contextmenu", (ev) => onDayClick(ev, dateObj, true));
          cell.addEventListener("mouseenter", () => showDayDetails(dateObj));
        } else {
          cell.addEventListener("mouseenter", () => showDayDetails(dateObj));
        }

        row.appendChild(cell);
      }

      table.appendChild(row);
    }

    applySelectionStyles();
  }

  function applySelectionStyles() {
    const table = document.getElementById("calendar-table");
    const cells = table.querySelectorAll(".calendar-day");
    cells.forEach(cell => {
      cell.classList.remove("selected-full", "selected-half");
    });

    Object.entries(state.daySelections).forEach(([dateIsoStr, sel]) => {
      const cell = table.querySelector(`.calendar-day[data-date="${dateIsoStr}"]`);
      if (!cell) return;
      if (sel.half) {
        cell.classList.add("selected-half");
      } else {
        cell.classList.add("selected-full");
      }
    });
  }

  // --- Click logic (incl. toggle off) ---
  function onDayClick(event, dateObj, isRightClick) {
    event.preventDefault();
    const errorElement = document.getElementById("error-message");
    errorElement.textContent = "";

    const dateIsoStr = isoDate(dateObj);
    const table = document.getElementById("calendar-table");
    const cell = table.querySelector(`.calendar-day[data-date="${dateIsoStr}"]`);
    if (!cell || cell.classList.contains("click-disabled")) {
      return;
    }

    if (!state.inputsLocked) {
      showToast("Bevestig eerst de tellers voordat je verlof inplant.");
      return;
    }

    // Als er al verlof staat: toggle = verwijderen
    if (state.daySelections[dateIsoStr]) {
      delete state.daySelections[dateIsoStr];
      saveState();
      applySelectionStyles();
      updateRemainingUI();
      showDayDetails(dateObj);
      showToast("Verlof verwijderd voor deze dag.");
      return;
    }

    const half = isRightClick;
    const neededHours = half ? HOURS_HALF_DAY : HOURS_FULL_DAY;
    const remaining = computeRemaining();

    const pcRules = getPcRules(state.pcCode);
    const priority = pcRules.getLeavePriority();

    let chosenType = null;
    let chosenBucket = null;

    const accessibleAdvBuckets = [];
    for (let i = 0; i < 4; i++) {
      const from = getAdvBucketAvailableFrom(i, state.year);
      if (from.getTime() <= dateObj.getTime()) {
        accessibleAdvBuckets.push(i);
      }
    }

    for (const type of priority) {
      if (type === LEAVE_TYPES.ADV) {
        let bestBucket = null;
        for (const b of accessibleAdvBuckets) {
          if (remaining.adv[b] >= neededHours) {
            bestBucket = b;
            break;
          }
        }
        if (bestBucket !== null) {
          chosenType = LEAVE_TYPES.ADV;
          chosenBucket = bestBucket;
          break;
        }
      } else if (type === LEAVE_TYPES.REGIONAL) {
        if (remaining.regional >= neededHours) {
          chosenType = LEAVE_TYPES.REGIONAL;
          break;
        }
      } else if (type === LEAVE_TYPES.REPLACEMENT) {
        if (remaining.replacement >= neededHours) {
          chosenType = LEAVE_TYPES.REPLACEMENT;
          break;
        }
      } else if (type === LEAVE_TYPES.STATUTORY) {
        if (remaining.statutory >= neededHours) {
          chosenType = LEAVE_TYPES.STATUTORY;
          break;
        }
      }
    }

    if (!chosenType) {
      let earliestFuture = null;
      for (let i = 0; i < 4; i++) {
        const futureHours = remaining.adv[i];
        if (futureHours > 0) {
          const from = getAdvBucketAvailableFrom(i, state.year);
          if (from.getTime() > dateObj.getTime()) {
            if (!earliestFuture || from.getTime() < earliestFuture.getTime()) {
              earliestFuture = from;
            }
          }
        }
      }

      if (earliestFuture) {
        const dd = String(earliestFuture.getDate()).padStart(2, "0");
        const mm = String(earliestFuture.getMonth() + 1).padStart(2, "0");
        const yyyy = earliestFuture.getFullYear();
        errorElement.textContent =
          "Je kan op deze datum geen ADV meer gebruiken. Eerstvolgende datum waarop ADV beschikbaar komt: " +
          `${dd}/${mm}/${yyyy}.`;
      } else {
        errorElement.textContent =
          "Je hebt niet genoeg resterende verlofuren om deze dag in te plannen.";
      }
      showToast("Verlof kan niet ingepland worden op deze datum.");
      return;
    }

    state.daySelections[dateIsoStr] = {
      type: chosenType,
      hours: neededHours,
      half: half,
      advBucket: chosenType === LEAVE_TYPES.ADV ? chosenBucket : undefined,
    };

    saveState();
    applySelectionStyles();
    updateRemainingUI();
    showDayDetails(dateObj);
  }

  function removeLeaveFromSelectedDay() {
    const detailDateEl = document.getElementById("detail-date");
    const iso = detailDateEl.dataset.iso;
    if (!iso || !state.daySelections[iso]) return;

    const yes = window.confirm("Verlof op deze dag verwijderen?");
    if (!yes) return;

    delete state.daySelections[iso];
    saveState();
    applySelectionStyles();
    updateRemainingUI();
    showDayDetails(new Date(iso));
    showToast("Verlof verwijderd voor deze dag.");
  }

  // --- Day details UI ---
  function showDayDetails(dateObj) {
    const dateIsoStr = isoDate(dateObj);
    const holidayMap = getHolidayMap();
    const sel = state.daySelections[dateIsoStr] || null;

    const dEl = document.getElementById("detail-date");
    const wEl = document.getElementById("detail-weekday");
    const hEl = document.getElementById("detail-holiday");
    const tEl = document.getElementById("detail-leave-type");
    const hrsEl = document.getElementById("detail-leave-hours");
    const halfEl = document.getElementById("detail-half");
    const removeBtn = document.getElementById("remove-day-btn");

    const dd = String(dateObj.getDate()).padStart(2, "0");
    const mm = String(dateObj.getMonth() + 1).padStart(2, "0");
    const yyyy = dateObj.getFullYear();

    dEl.textContent = `${dd}/${mm}/${yyyy}`;
    dEl.dataset.iso = dateIsoStr;
    wEl.textContent = weekdayName(dateObj);

    const holiday = holidayMap[dateIsoStr];
    if (holiday) {
      hEl.textContent = holiday.name;
    } else if (isWeekend(dateObj)) {
      hEl.textContent = "Weekend";
    } else {
      hEl.textContent = "‚Äì";
    }

    if (!sel) {
      tEl.textContent = "Geen";
      hrsEl.textContent = "‚Äì";
      halfEl.textContent = "‚Äì";
      removeBtn.disabled = true;
    } else {
      let typeLabel = "";
      switch (sel.type) {
        case LEAVE_TYPES.ADV:
          typeLabel = "ADV";
          if (typeof sel.advBucket === "number") {
            typeLabel += ` (Q${sel.advBucket + 1})`;
          }
          break;
        case LEAVE_TYPES.REGIONAL:
          typeLabel = "Vlaamse Gemeenschap";
          break;
        case LEAVE_TYPES.REPLACEMENT:
          typeLabel = "Vervangende feestdag";
          break;
        case LEAVE_TYPES.STATUTORY:
          typeLabel = "Wettelijk verlof";
          break;
      }
      tEl.textContent = typeLabel;
      hrsEl.textContent = formatHours(sel.hours) + " u";
      halfEl.textContent = sel.half ? "Ja" : "Nee";
      removeBtn.disabled = false;
    }
  }

  // --- Inputs & totals ---
  function updateInputDaysLabels() {
    const statutory = parseFloat(document.getElementById("statutory-hours").value) || 0;
    const replacement = parseFloat(document.getElementById("replacement-hours").value) || 0;
    const regional = parseFloat(document.getElementById("regional-hours").value) || 0;
    const adv1 = parseFloat(document.getElementById("adv1-hours").value) || 0;
    const adv2 = parseFloat(document.getElementById("adv2-hours").value) || 0;
    const adv3 = parseFloat(document.getElementById("adv3-hours").value) || 0;
    const adv4 = parseFloat(document.getElementById("adv4-hours").value) || 0;

    document.getElementById("statutory-days-label").textContent = `${floorDays(statutory)} dagen`;
    document.getElementById("replacement-days-label").textContent = `${floorDays(replacement)} dagen`;
    document.getElementById("regional-days-label").textContent = `${floorDays(regional)} dagen`;
    document.getElementById("adv1-days-label").textContent = `${floorDays(adv1)} dagen`;
    document.getElementById("adv2-days-label").textContent = `${floorDays(adv2)} dagen`;
    document.getElementById("adv3-days-label").textContent = `${floorDays(adv3)} dagen`;
    document.getElementById("adv4-days-label").textContent = `${floorDays(adv4)} dagen`;

    const totalHours = statutory + replacement + regional + adv1 + adv2 + adv3 + adv4;
    document.getElementById("total-hours-label").textContent = `Totaal: ${formatHours(totalHours)} uur`;
    document.getElementById("total-days-label").textContent = `${floorDays(totalHours)} dagen`;
  }

  function confirmInputs() {
    const statutory = parseFloat(document.getElementById("statutory-hours").value) || 0;
    const replacement = parseFloat(document.getElementById("replacement-hours").value) || 0;
    const regional = parseFloat(document.getElementById("regional-hours").value) || 0;
    const adv1 = parseFloat(document.getElementById("adv1-hours").value) || 0;
    const adv2 = parseFloat(document.getElementById("adv2-hours").value) || 0;
    const adv3 = parseFloat(document.getElementById("adv3-hours").value) || 0;
    const adv4 = parseFloat(document.getElementById("adv4-hours").value) || 0;

    state.countersInitial = {
      statutory,
      replacement,
      regional,
      adv: [adv1, adv2, adv3, adv4],
    };
    state.inputsLocked = true;
    saveState();
    showToast("Tellers bevestigd. Je kan nu verlof inplannen.");
    updateInputsLockedUI();
    updateRemainingUI();
  }

  function updateInputsLockedUI() {
    const locked = state.inputsLocked;
    const ids = [
      "statutory-hours","replacement-hours","regional-hours",
      "adv1-hours","adv2-hours","adv3-hours","adv4-hours",
    ];
    ids.forEach(id => {
      document.getElementById(id).disabled = locked;
    });

    document.getElementById("confirm-inputs-btn").style.display = locked ? "none" : "inline-flex";
    document.getElementById("edit-inputs-btn").style.display = locked ? "inline-flex" : "none";
  }

  function editInputs() {
    state.inputsLocked = false;
    saveState();
    showToast("Tellers weer bewerkbaar.");
    updateInputsLockedUI();
  }

  function updateRemainingUI() {
    const rem = computeRemaining();
    const fields = [
      ["remaining-statutory", rem.statutory],
      ["remaining-replacement", rem.replacement],
      ["remaining-regional", rem.regional],
      ["remaining-adv1", rem.adv[0]],
      ["remaining-adv2", rem.adv[1]],
      ["remaining-adv3", rem.adv[2]],
      ["remaining-adv4", rem.adv[3]],
    ];
    fields.forEach(([id, hours]) => {
      document.getElementById(id).textContent =
        `${formatHours(hours)} u (${floorDays(hours)} d)`;
    });

    const totalHours = rem.statutory + rem.replacement + rem.regional +
      rem.adv[0] + rem.adv[1] + rem.adv[2] + rem.adv[3];
    document.getElementById("remaining-total").textContent =
      `${formatHours(totalHours)} u (${floorDays(totalHours)} d)`;
  }

  // --- Year & PC dropdowns ---
  function initYearSelect() {
    const select = document.getElementById("year-select");
    select.innerHTML = "";
    const currentYear = new Date().getFullYear();
    for (let y = currentYear - 2; y <= currentYear + 3; y++) {
      const opt = document.createElement("option");
      opt.value = y.toString();
      opt.textContent = y.toString();
      if (y === state.year) opt.selected = true;
      select.appendChild(opt);
    }
  }

  function onYearChange() {
    const year = parseInt(document.getElementById("year-select").value, 10);
    const pcCode = document.getElementById("pc-select").value;
    loadStateFor(year, pcCode);
    updateUIFromState();
    showToast("Jaar gewijzigd.");
  }

  function onPcChange() {
    const pcCode = document.getElementById("pc-select").value;
    const year = parseInt(document.getElementById("year-select").value, 10);
    loadStateFor(year, pcCode);
    updateUIFromState();
    showToast("Paritair comit√© gewijzigd.");
  }

  // --- CSV Export ---
  function exportCsv() {
    const entries = Object.entries(state.daySelections);
    if (entries.length === 0) {
      showToast("Geen ingeplande verlofdagen om te exporteren.");
      return;
    }

    const holidayMap = getHolidayMap();
    const rows = [];
    rows.push(["date","weekday","type","hours","is_half_day","holiday_label"].join(";"));

    entries.sort(([d1], [d2]) => d1.localeCompare(d2));

    entries.forEach(([dateIsoStr, sel]) => {
      const dateObj = new Date(dateIsoStr);
      const holiday = holidayMap[dateIsoStr];
      let typeLabel = "";
      switch (sel.type) {
        case LEAVE_TYPES.ADV:
          typeLabel = "ADV";
          if (typeof sel.advBucket === "number") {
            typeLabel += ` (Q${sel.advBucket + 1})`;
          }
          break;
        case LEAVE_TYPES.REGIONAL:
          typeLabel = "Vlaamse Gemeenschap";
          break;
        case LEAVE_TYPES.REPLACEMENT:
          typeLabel = "Vervangende feestdag";
          break;
        case LEAVE_TYPES.STATUTORY:
          typeLabel = "Wettelijk verlof";
          break;
      }
      const row = [
        dateIsoStr,
        weekdayName(dateObj),
        typeLabel,
        sel.hours.toFixed(2).replace(".", ","),
        sel.half ? "1" : "0",
        holiday ? holiday.name : "",
      ];
      rows.push(row.join(";"));
    });

    const csvContent = rows.join("\n");
    const blob = new Blob([csvContent], { type: "text/csv;charset=utf-8;" });
    const url = URL.createObjectURL(blob);

    const a = document.createElement("a");
    a.href = url;
    a.download = `verlofplanning_${state.year}_${state.pcCode}.csv`;
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
    URL.revokeObjectURL(url);
  }

  // --- About toggle ---
  function toggleAbout() {
    const box = document.getElementById("about-content");
    box.classList.toggle("visible");
  }

  // --- Theme toggle ---
  function applyStoredTheme() {
    const stored = localStorage.getItem(THEME_KEY);
    const body = document.body;
    const btn = document.getElementById("theme-toggle");
    if (!stored || stored === "dark") {
      body.classList.remove("light-theme");
      if (btn) {
        btn.innerHTML = "‚òÄÔ∏è<span>Dark mode</span>";
        btn.setAttribute("aria-label", "Schakel naar lichte modus");
      }
    } else {
      body.classList.add("light-theme");
      if (btn) {
        btn.innerHTML = "üåô<span>Light mode</span>";
        btn.setAttribute("aria-label", "Schakel naar donkere modus");
      }
    }
  }

  function toggleTheme() {
    const body = document.body;
    const btn = document.getElementById("theme-toggle");
    const isLight = body.classList.toggle("light-theme");
    if (isLight) {
      localStorage.setItem(THEME_KEY, "light");
      btn.innerHTML = "üåô<span>Light mode</span>";
      btn.setAttribute("aria-label", "Schakel naar donkere modus");
    } else {
      localStorage.setItem(THEME_KEY, "dark");
      btn.innerHTML = "‚òÄÔ∏è<span>Dark mode</span>";
      btn.setAttribute("aria-label", "Schakel naar lichte modus");
    }
  }

  // --- Global UI update ---
  function updateUIFromState() {
    initYearSelect();
    document.getElementById("year-select").value = String(state.year);
    document.getElementById("pc-select").value = state.pcCode;

    document.getElementById("statutory-hours").value = state.countersInitial.statutory || 0;
    document.getElementById("replacement-hours").value = state.countersInitial.replacement || 0;
    document.getElementById("regional-hours").value = state.countersInitial.regional || 0;
    document.getElementById("adv1-hours").value = state.countersInitial.adv[0] || 0;
    document.getElementById("adv2-hours").value = state.countersInitial.adv[1] || 0;
    document.getElementById("adv3-hours").value = state.countersInitial.adv[2] || 0;
    document.getElementById("adv4-hours").value = state.countersInitial.adv[3] || 0;

    updateInputDaysLabels();
    updateInputsLockedUI();

    buildCalendarTable();
    updateRemainingUI();

    document.getElementById("error-message").textContent = "";
    const now = new Date(state.year, 0, 1);
    showDayDetails(now);
  }

  // --- Init ---
  document.addEventListener("DOMContentLoaded", () => {
    const currentYear = new Date().getFullYear();
    const initialPc = document.getElementById("pc-select").value || PC_CODES.PC200;

    loadStateFor(currentYear, initialPc);
    applyStoredTheme();
    initYearSelect();
    updateUIFromState();

    [
      "statutory-hours","replacement-hours","regional-hours",
      "adv1-hours","adv2-hours","adv3-hours","adv4-hours",
    ].forEach(id => {
      document.getElementById(id).addEventListener("input", updateInputDaysLabels);
    });

    document.getElementById("confirm-inputs-btn").addEventListener("click", confirmInputs);
    document.getElementById("edit-inputs-btn").addEventListener("click", editInputs);

    document.getElementById("year-select").addEventListener("change", onYearChange);
    document.getElementById("pc-select").addEventListener("change", onPcChange);

    document.getElementById("remove-day-btn").addEventListener("click", removeLeaveFromSelectedDay);
    document.getElementById("export-csv-btn").addEventListener("click", exportCsv);
    document.getElementById("reset-btn").addEventListener("click", resetStateConfirmation);
    document.getElementById("about-toggle-btn").addEventListener("click", toggleAbout);
    document.getElementById("theme-toggle").addEventListener("click", toggleTheme);
  });
</script>
</body>
</html>

